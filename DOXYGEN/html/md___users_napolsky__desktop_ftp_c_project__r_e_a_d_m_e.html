<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FTP: OGÓLNY OPIS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ghost.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FTP
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Author: Ivan Napolskykh</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OGÓLNY OPIS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>File Transfer Protocol (FTP) klient-serwer apklikacja (<a href="https://www.rfc-editor.org/rfc/rfc959.txt">RFC 959</a>) zaimplementowana za użyciem C Stream Sockets biblioteki w języku C.</p>
<h1>SPOSÓB UŻYTKOWANIA FTP PROTOKOŁEM</h1>
<ol type="1">
<li>Skopijować FTP Manager C folder w główny katalog użytkownika.</li>
<li>W terminalu: <div class="fragment"><div class="line">~$ cd FTP\ Manager\ C/</div><div class="line"></div><div class="line">~$ make</div></div><!-- fragment --></li>
</ol>
<ul>
<li>Ze strony serwera:</li>
</ul>
<div class="fragment"><div class="line">~$ cd ./Server/</div><div class="line">~$ ./server &lt;port number&gt;</div></div><!-- fragment --><p> Serwer zostanie podniesiony z ustawieniem nasłuchiwania połączen na wybranym porcie.</p>
<ul>
<li>Ze strony klienta:</li>
</ul>
<div class="fragment"><div class="line">~$ cd ./Client/</div><div class="line">~$ ./client &lt;IP address of server&gt; &lt;port number&gt;</div></div><!-- fragment --><p> Jako domylśny IP adres serwera jest używany: <code>127.0.0.1</code></p>
<ol type="1">
<li>Dostępne komendy:<ul>
<li><code>ftp&gt;put &lt;filename&gt;</code> (służy do zaladowania pliku o nazwie <code>filename</code> do serwera)</li>
<li><code>ftp&gt;get &lt;filename&gt;</code> (służy do pobrania pliku o nazwie <code>filename</code> z serwera)</li>
<li><code>ftp&gt;ls</code> (służy do wyswietłenia listy plików z bieżącego folderu na serwerze)</li>
<li><code>ftp&gt;!ls</code> (służy do wyswietłenia listy plików z bieżącego folderu na kliencie)</li>
<li><code>ftp&gt;cd &lt;directory&gt;</code> (służy do zmiany bieżącego folderu na serwerze)</li>
<li><code>ftp&gt;!cd &lt;directory&gt;</code> (służy do zmiany bieżącego folderu na kliencie)</li>
<li><code>ftp&gt;pwd</code> (służy do wyświetłenia ścieżki do bieżącego folderu na serwerze)</li>
<li><code>ftp&gt;!pwd</code> (służy do wyświetłenia ścieżki do bieżącego folderu na kliencie)</li>
<li><code>ftp&gt;quit</code> (służy do zamknięcia FTP sesji na kliencie i zwrotu do macierzynskiego środowiska)</li>
</ul>
</li>
</ol>
<h1>ZAKONCZENIE DZIALANIA</h1>
<ul>
<li>Można zamknąć serwer za pomocy zwykłego sygnalu <code>Ctrl + C</code> w oknie terminalu z uruchomionym serwerem.</li>
<li>Można zamknąć serwer za pomocy wywolania komendy <code>"quit"</code> w oknie terminalu z uruchomionym klientem.</li>
</ul>
<h1>OGRANICZENIA</h1>
<ul>
<li>Zaimplementowane są wyłącznie wyżej zaznaczone polecenia.</li>
<li>Maksymalna liczba jednocześnie zalogowanych clientów nie może przekraczać 8.</li>
<li>W nazwach ścierzek, które są używane jako bierzący katalog roboczy, nie może zaistnieć żadnych spacji (jest to określono tym, że <code>cd &lt;directory&gt;</code> jest zaimplementowana za użyciem <code>chdir(&lt;directory&gt;)</code>, która nie pozwala na użycie białych symboli).</li>
<li>Komenda <code>get</code> przepisywuje istniejący plik, jeżeli taki istnieje w katalogu roboczym klienta. Podobnie, <code>put</code> komenda przepisywuje istniejący plik, jeżeli taki istnieje w katalogu roboczym serwera.</li>
</ul>
<h1>WŁAŚCIWOŚCI</h1>
<ul>
<li>Przyjmuje każdą z powyżej opisanych komend. Ponad tego, odpowiada komunikatem o blędzie w przypadku niepoprawnego polecenia: <code>"An invalid FTP command"</code>.</li>
<li>Dopasowuje polecenia i wypisywuje odpowiednie dane w terminalu.</li>
<li>Sprawdzenie konca pliku w przypadku <code>get</code> i <code>put</code> komend jest zaimplementowane za pomocy odwolania w odpowiednim procesie(<code>server/client</code>) do rozmiaru(czy liczbie bloków) pliku.</li>
<li>Działa w trybie połączeniowym i współbieżnym.</li>
</ul>
<h1>SZCZEGÓŁY IMPLEMENTACYJNE (OPIS DZIAŁANIA)</h1>
<ol type="1">
<li><code><a class="el" href="server_8c.html">server.c</a></code> - plik zawierający implementacje strony serweru protokolu FTP:<ul>
<li>Tworzy <code>soket</code> i dowiązuje jego do portu(określonego jako argument, przy wywolaniu procesu).</li>
<li>Zaczyna nasłuchiwać na sokecie.</li>
<li>Przyjmuje połączenie od klienta.</li>
<li>Uzyskuje FTP polecenie od klienta.</li>
<li>Dopasowuje FTP polecenie i sprawdza jego poprawność. Jeżeli wynika błąd podczas zapytu, wysyła komunikat o tym do klienta.</li>
<li>Wszystkie polecenia są podawane w terminalu. Są konwerowane do poprawnej postaci i wywolane(klientem/serwerem w zależności od rządania).</li>
<li>W przypadku uzyskania komendy <code>get</code>, sprawdza określony plik i wysyła jego do klienta przez połączenie danych (port danych jest generowany serwerem) w postaci blokowej.</li>
<li>W przypadku uzyskania komendy <code>put</code>, uzyskuje określony plik od klienta przez połączenie danych (port danych jest generowany serwerem) w postaci blokowej.</li>
<li>W przypadku uzyskania komendy <code>ls</code>, wywolane zostaje polecenie <code>popen("ls","r")</code>, zaczym wysyłany spis plikow przez połączenie danych (port danych jest generowany serwerem) w postaci blokowej(lista plików może być dużego rozmiaru).</li>
<li>W przypadku uzyskania komendy <code>cd &lt;directory&gt;</code>, wywolane zostaje polecenie <code>chdir(&lt;directory&gt;)</code>, zaczym zmieniany katalog roboczy serwera.</li>
<li>W przypadku uzyskania komendy <code>pwd</code>, wywolane zostaje polecenie <code>_getcwd</code>, jeżeli serwerem jest maszyna pod systemem Windows, czy <code>getcwd</code> w przeciwnym przypadku, żeby uzyskać katalog roboczy serwera i nadeśłać jego do klienta.</li>
<li>Zamyka się połączenie z klientem, jeżeli zostało uzyskane polecenie <code>quit</code> od klienta.</li>
<li>Czeka na nowe połączenia i powtaża cykliczne opisany proces, dopóki nie zostanie wyłączony.</li>
</ul>
</li>
<li><code>client.cpp</code> - plik zawierający implementacje strony klienta protokolu FTP:<ul>
<li>Tworzy <code>soket</code> i dowiązuje jego do serweru za pomocy IP adresu serweru i portu(określonych jako argumenty, przy wywolaniu procesu).</li>
<li>Dopasowuje FTP polecenie i sprawdza jego poprawność. Jeżeli wynika błąd podczas zapytu, wysyła komunikat o tym do klienta.</li>
<li>Wszystkie polecenia są podawane w terminalu. Są konwerowane do poprawnej postaci i wywolane(klientem/serwerem w zależności od rządania).</li>
<li>W przypadku uzyskania komendy <code>get</code>, uzyskuje plik przez połączenie danych (port danych jest generowany serwerem) w postaci blokowej.</li>
<li>W przypadku uzyskania komendy <code>put</code>, sprawdza określony plik i wysyła jego do serwera przez połączenie danych (port danych jest generowany serwerem) w postaci blokowej.</li>
<li>W przypadku uzyskania komendy <code>ls</code>, uzyskuje spis plikow przez połączenie danych (port danych jest generowany serwerem) w postaci blokowej(lista plików może być dużego rozmiaru).</li>
<li>W przypadku uzyskania komendy <code>!ls</code>, użyte zostaje polecenie <code>system("ls")</code>, zaczym wypisywany spis plikow z katalogu bierzącego clienta.</li>
<li>W przypadku uzyskania komendy <code>!cd &lt;directory&gt;</code>, wywolane zostaje polecenie <code>chdir(&lt;directory&gt;)</code>, zaczym zmieniany katalog roboczy klienta.</li>
<li>W przypadku uzyskania komendy <code>pwd</code>, wywolane zostaje polecenie <code>_getcwd</code>, jeżeli serwerem jest maszyna pod systemem Windows, czy <code>getcwd</code> w przeciwnym przypadku, żeby uzyskać katalog roboczy klienta.</li>
<li>Wraca się do macierzynskiego środowiska z klienta, jeżeli użyska polecenie <code>quit</code>.</li>
</ul>
</li>
</ol>
<h1>TESTY</h1>
<p>1) Inicjalizacja połączenia:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>~$./server 9999</code>Server running...waiting for connections.Received request...Child created for dealing with client requests  </td><td class="markdownTableBodyNone"><code>~$./client 127.0.0.1 9999</code>ftp&gt;   </td></tr>
</table>
<p>2) <code>ls</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: ls  </td><td class="markdownTableBodyNone"><code>ftp&gt;ls</code>server<a class="el" href="server_8c.html">server.c</a>test2   </td></tr>
</table>
<p>3) <code>!ls</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: !ls  </td><td class="markdownTableBodyNone"><code>ftp&gt;!ls</code>client<a class="el" href="client_8c.html">client.c</a>test   </td></tr>
</table>
<p>4) <code>put</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: put testFilename given is: testFile download done.  </td><td class="markdownTableBodyNone"><code>ftp&gt;put test</code>File upload done.   </td></tr>
</table>
<p>5) <code>get</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: get test2Filename given is: test2File upload done.  </td><td class="markdownTableBodyNone"><code>ftp&gt;get test2</code>File download done.   </td></tr>
</table>
<p>6) <code>pwd</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: pwd  </td><td class="markdownTableBodyNone"><code>ftp&gt;pwd</code>/home/eouser/FTP\ Manager\ C/Server   </td></tr>
</table>
<p>7) <code>!pwd</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: !pwd  </td><td class="markdownTableBodyNone"><code>ftp&gt;!pwd</code>/Users/napolsky/FTP\ Manager\ C/Client   </td></tr>
</table>
<p>6) <code>cd</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: cd ../ClientPath given is: ../Client  </td><td class="markdownTableBodyNone"><code>ftp&gt;cd ../Client</code>Path given is: ../Client   </td></tr>
</table>
<p>7) <code>!cd</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: !cd ../ServerPath given is: ../Server  </td><td class="markdownTableBodyNone"><code>ftp&gt;!cd ../Server</code>Path given is: ../Server   </td></tr>
</table>
<p>8) <code>quit</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone" colspan="2">Strona   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String received from client: quitThe client has quit  </td><td class="markdownTableBodyNone"><code>ftp&gt;quit</code>   </td></tr>
</table>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
